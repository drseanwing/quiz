# ============================================================================
# REdI Quiz Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# SECURITY WARNING: Never commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Application
# ----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME="REdI Quiz Platform"
APP_URL=https://quiz.vps.resuseducation.com

# ----------------------------------------------------------------------------
# Backend API
# ----------------------------------------------------------------------------
PORT=3000
API_PREFIX=/api

# ----------------------------------------------------------------------------
# Database
# ----------------------------------------------------------------------------
POSTGRES_USER=redi_user
POSTGRES_PASSWORD=change-this-secure-password
POSTGRES_DB=redi_quiz
POSTGRES_HOST=db
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public

# ----------------------------------------------------------------------------
# Authentication
# ----------------------------------------------------------------------------
# Generate secure secrets with: openssl rand -base64 64
JWT_SECRET=change-this-jwt-secret-min-32-characters
JWT_REFRESH_SECRET=change-this-refresh-secret-min-32-characters
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true

# Account lockout
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# ----------------------------------------------------------------------------
# Email Domain Restriction
# ----------------------------------------------------------------------------
ALLOWED_EMAIL_DOMAIN=health.qld.gov.au

# ----------------------------------------------------------------------------
# Email Service (Power Automate)
# ----------------------------------------------------------------------------
POWER_AUTOMATE_EMAIL_URL=https://a67592d2e775e14cbb5a6366576198.ca.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/763615b631ce494e82d00f5f75c49245/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=TLzkk5K0eB16pYdi0Rq3bVCuSnryqyKPV3u3FWF4Muw
EMAIL_REPLY_TO=redi@health.qld.gov.au
EMAIL_FROM_NAME=REdI Quiz Platform

# ----------------------------------------------------------------------------
# File Uploads
# ----------------------------------------------------------------------------
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# ----------------------------------------------------------------------------
# Logging
# ----------------------------------------------------------------------------
LOG_DIR=/app/logs
LOG_LEVEL=debug
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760

# ----------------------------------------------------------------------------
# Rate Limiting
# ----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5

# ----------------------------------------------------------------------------
# Frontend
# ----------------------------------------------------------------------------
VITE_API_URL=http://localhost:9471/api
VITE_APP_NAME=REdI Quiz Platform

# ----------------------------------------------------------------------------
# CORS
# ----------------------------------------------------------------------------
CORS_ORIGIN=https://quiz.vps.resuseducation.com,http://localhost:9473,http://localhost:9471
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Session
# ----------------------------------------------------------------------------
SESSION_SECRET=change-this-session-secret

# ----------------------------------------------------------------------------
# Database Backup
# ----------------------------------------------------------------------------
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=/backups

# ----------------------------------------------------------------------------
# Development
# ----------------------------------------------------------------------------
ENABLE_DEBUG=true
MOCK_EMAIL=false
